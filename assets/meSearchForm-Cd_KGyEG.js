import{$ as a}from"./jquery-D8qrIbGF.js";import{d as C,r as d,y as F,C as R,O as k,i as S,W as f,o as m,w as i,L as b,k as g,X as h,j as p,t as v,Q as $}from"./core-DgTHnQpx.js";import{_ as T}from"./index-pAeQZ1-G.js";import{E,a as A}from"./index-BVaSujfL.js";import{E as B}from"./index-yTwIwyY4.js";const _={forever:{type:Number,default:1},defaultAll:{type:Boolean,default:!1},searchText:{type:String,default:""},resetText:{type:String,default:""},labelWidth:{type:[String,Number],default:"80px"},labelPosition:{type:String,default:"right"},onSearch:Function,onReset:Function},N=C({name:"MeSearchForm",props:_,setup(e,{expose:o}){const r=d(),u=d(e.defaultAll),n=d(""),c=new ResizeObserver(t=>t[0].contentRect.width<768?n.value="":t[0].contentRect.width<1150?n.value="lg":t[0].contentRect.width<1600?n.value="xl":n.value="xl-2");F(()=>{c.observe(r.value.$el),R(u,()=>{const t=a(r.value.$el).children();u.value?t.each(function(s){s>=e.forever&&s!=t.length-1&&a(this).css("display",a(this).data("display"))}):t.each(function(s){s>=e.forever&&s!=t.length-1&&(a(this).data("display",a(this).css("display")),a(this).css("display","none"))})},{immediate:!0})}),k(()=>{c.disconnect()}),o({elFormRef:r});const l=d(!1);return{showAll:u,elFormRef:r,search:async()=>{var t;l.value=!0;try{await((t=e.onSearch)==null?void 0:t.call(e))}finally{l.value=!1}},loading:l,formClass:n}}});function z(e,o,r,u,n,c){const l=B,y=S("mel-icon-arrow-down"),t=E,s=A;return m(),f(s,{ref:"elFormRef",class:$(["me-search-form",e.formClass]),"label-width":e.labelWidth,"label-position":e.labelPosition},{default:i(()=>[b(e.$slots,"default",{},void 0,!0),g(t,{class:"button-item"},{default:i(()=>[b(e.$slots,"button",{},void 0,!0),e.searchText!==void 0?(m(),f(l,{key:0,type:"primary",loading:e.loading,onClick:o[0]||(o[0]=w=>e.search())},{default:i(()=>[p(v(e.searchText?e.searchText:e.$t("查询")),1)]),_:1},8,["loading"])):h("",!0),e.resetText!==void 0?(m(),f(l,{key:1,onClick:o[1]||(o[1]=w=>e.onReset?e.onReset():e.elFormRef.resetFields())},{default:i(()=>[p(v(e.resetText?e.resetText:e.$t("重置")),1)]),_:1})):h("",!0),e.forever?(m(),f(l,{key:2,text:"",bg:"",onClick:o[2]||(o[2]=w=>e.showAll=!e.showAll)},{default:i(()=>[p(v(e.$t(e.showAll?"收起":"展开"))+" ",1),g(y,{class:$(["more-icon",{reversal:e.showAll}])},null,8,["class"])]),_:1})):h("",!0)]),_:3})]),_:3},8,["class","label-width","label-position"])}const O=T(N,[["render",z],["__scopeId","data-v-cac9e7bf"]]);export{O as _};
