import{a9 as c,aO as s,_ as R}from"./index-pAeQZ1-G.js";import"./mock-h91I9qF-.js";import{a as j,E as N}from"./index-BVaSujfL.js";import{E as z}from"./index-DHCz5-7b.js";import{E as G}from"./index-BqQg0EVn.js";import{E as K}from"./index-Cu8ks7sa.js";import{E as W,b as $}from"./index-Cj9wNU57.js";import{E as H}from"./index-yTwIwyY4.js";import{E as J}from"./index-CdVB_pP8.js";import{d as B,r as T,a4 as Q,C as S,p as X,W as v,o as m,w as r,k as o,u as l,c as U,T as k,ar as q,j as f,t as D}from"./core-DgTHnQpx.js";class x{constructor(){s(this,"id",void 0),s(this,"parentId",void 0),s(this,"name",""),s(this,"rule",""),s(this,"sort",0),s(this,"status",1),s(this,"type",1)}}function Y(){return c(u=>({url:"admin/menu/add",method:"POST",data:u}),{success:!0})}function Z(){return c((u,_)=>({url:"admin/menu/{id}".replace("{id}",u+""),method:"POST",data:_}),{success:!0})}function be(){return c(u=>({url:"admin/menu/{id}".replace("{id}",u+""),method:"DELETE"}),{success:!0})}function ee(){return c(()=>({url:"menu/index",method:"get"}),{noLoading:!0,cacheKey:"menuList",cacheTime:5*60*1e3})}const te={1:"菜单",2:"页面",3:"按钮"},ae={0:"关闭",1:"开启"},le=B({setup:!0,name:"Add"}),oe=B({...le,__name:"add",props:{show:{type:Boolean},data:{}},emits:["update:show","success"],setup(u,{emit:_}){const i=u,b=_,g=T(),t=T(new x),C=Q({parentId:[{required:!0,message:"父级必须选择",trigger:"blur"}],name:[{required:!0,message:"名称必须填写",trigger:"blur"}],rule:[{required:!0,message:"规则必须填写",trigger:"blur"}],type:[{required:!0,message:"类型必须选择",trigger:"blur"}],status:[{required:!0,message:"状态必须选择",trigger:"blur"}]}),E=()=>{i.data?t.value={...i.data}:t.value=new x};S(()=>i.data,E);const V=ee();V.run();const L=X(()=>V.data.value?[{id:0,name:"无",parentId:0,children:[],status:1},...V.data.value]:[]);S(()=>i.show,p=>{!p&&g.value.clearValidate()});const M=async()=>{await g.value.validate()&&(t.value.id?await Z().runAsync(t.value.id,t.value):await Y().runAsync(t.value),b("success"),b("update:show",!1))};return(p,e)=>{const O=z,n=N,y=G,h=K,w=$,I=W,A=H,F=j,P=J;return m(),v(P,{"model-value":p.show,title:p.data?"编辑":"新增","onUpdate:modelValue":e[7]||(e[7]=a=>b("update:show",a))},{default:r(()=>[o(F,{ref_key:"formRef",ref:g,model:l(t),rules:l(C)},{default:r(()=>[o(n,{label:"父级",prop:"parentId"},{default:r(()=>[o(O,{modelValue:l(t).parentId,"onUpdate:modelValue":e[0]||(e[0]=a=>l(t).parentId=a),props:{label:"name",value:"id"},data:l(L),"render-after-expand":!1,filterable:"","check-strictly":""},null,8,["modelValue","data"])]),_:1}),o(n,{label:"名称",prop:"name"},{default:r(()=>[o(y,{modelValue:l(t).name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(t).name=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"规则",prop:"rule"},{default:r(()=>[o(y,{modelValue:l(t).rule,"onUpdate:modelValue":e[2]||(e[2]=a=>l(t).rule=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"排序",prop:"sort"},{default:r(()=>[o(h,{modelValue:l(t).sort,"onUpdate:modelValue":e[3]||(e[3]=a=>l(t).sort=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"类型",prop:"type"},{default:r(()=>[o(I,{modelValue:l(t).type,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).type=a)},{default:r(()=>[(m(!0),U(k,null,q(l(te),(a,d)=>(m(),v(w,{key:d,label:+d},{default:r(()=>[f(D(a),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"状态",prop:"status"},{default:r(()=>[o(I,{modelValue:l(t).status,"onUpdate:modelValue":e[5]||(e[5]=a=>l(t).status=a)},{default:r(()=>[(m(!0),U(k,null,q(l(ae),(a,d)=>(m(),v(w,{key:d,label:+d},{default:r(()=>[f(D(a),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,null,{default:r(()=>[o(A,{type:"primary",onClick:M},{default:r(()=>e[8]||(e[8]=[f("提交")])),_:1}),o(A,{onClick:e[6]||(e[6]=a=>E())},{default:r(()=>e[9]||(e[9]=[f("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}}}),re=R(oe,[["__scopeId","data-v-1c396b43"]]),ge=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{re as A,ge as a,be as d,ee as m,ae as s,te as t};
