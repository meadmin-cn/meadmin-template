import{a9 as m,aO as d,_ as h}from"./index-pAeQZ1-G.js";import"./mock-h91I9qF-.js";import{a as q,E as x}from"./index-BVaSujfL.js";import{E as B}from"./index-DHCz5-7b.js";import{E as L}from"./index-BqQg0EVn.js";import{E as P,b as R}from"./index-Cj9wNU57.js";import{E as U}from"./index-yTwIwyY4.js";import{E as j}from"./index-CdVB_pP8.js";import{d as I,r as w,a4 as F,C as V,p as N,W as z,o as K,w as o,k as a,u as l,j as p}from"./core-DgTHnQpx.js";class y{constructor(){d(this,"id",void 0),d(this,"parentId",void 0),d(this,"name",""),d(this,"rules",[]),d(this,"status",1)}}function M(){return m(s=>({url:"admin/group/add",method:"POST",data:s}),{success:!0})}function W(){return m((s,f)=>({url:"admin/group/{id}".replace("{id}",s+""),method:"POST",data:f}),{success:!0})}function se(){return m(s=>({url:"admin/group/{id}".replace("{id}",s+""),method:"DELETE"}),{success:!0})}function $(){return m(()=>({url:"admin/group/index",method:"get"}),{noLoading:!0,cacheKey:"groupList",cacheTime:5*60*1e3})}const H=I({setup:!0,name:"Add"}),J=I({...H,__name:"add",props:{show:{type:Boolean},data:{}},emits:["update:show","success"],setup(s,{emit:f}){const n=s,c=f,_=w(),t=w(new y),A=F({parentId:[{required:!0,message:"父级必须选择",trigger:"blur"}],name:[{required:!0,message:"名称必须填写",trigger:"blur"}],status:[{required:!0,message:"状态必须选择",trigger:"blur"}]}),b=()=>{n.data?t.value={...n.data}:t.value=new y};V(()=>n.data,b);const g=$();g.run();const k=N(()=>g.data.value?[{id:0,name:"无",parentId:0,children:[],rules:[],status:0},...g.data.value]:[]);V(()=>n.show,u=>{!u&&_.value.clearValidate()});const T=async()=>{await _.value.validate()&&(t.value.id?await W().runAsync(t.value.id,t.value):await M().runAsync(t.value),c("success"),c("update:show",!1))};return(u,e)=>{const S=B,i=x,C=L,v=R,D=P,E=U,G=q,O=j;return K(),z(O,{"model-value":u.show,title:u.data?"编辑":"新增","onUpdate:modelValue":e[4]||(e[4]=r=>c("update:show",r))},{default:o(()=>[a(G,{ref_key:"formRef",ref:_,model:l(t),rules:l(A)},{default:o(()=>[a(i,{label:"父级",prop:"parentId"},{default:o(()=>[a(S,{modelValue:l(t).parentId,"onUpdate:modelValue":e[0]||(e[0]=r=>l(t).parentId=r),disabled:u.data!==void 0,props:{label:"name",value:"id",disabled:({id:r})=>r<=0},data:l(k),"render-after-expand":!1,filterable:"","check-strictly":""},null,8,["modelValue","disabled","props","data"])]),_:1}),a(i,{label:"名称",prop:"name"},{default:o(()=>[a(C,{modelValue:l(t).name,"onUpdate:modelValue":e[1]||(e[1]=r=>l(t).name=r)},null,8,["modelValue"])]),_:1}),a(i,{label:"状态",prop:"status"},{default:o(()=>[a(D,{modelValue:l(t).status,"onUpdate:modelValue":e[2]||(e[2]=r=>l(t).status=r)},{default:o(()=>[a(v,{label:1},{default:o(()=>e[5]||(e[5]=[p("启用")])),_:1}),a(v,{label:0},{default:o(()=>e[6]||(e[6]=[p("禁用")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(i,null,{default:o(()=>[a(E,{type:"primary",onClick:T},{default:o(()=>e[7]||(e[7]=[p("提交")])),_:1}),a(E,{onClick:e[3]||(e[3]=r=>b())},{default:o(()=>e[8]||(e[8]=[p("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}}}),Q=h(J,[["__scopeId","data-v-66be9a2b"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as A,ue as a,se as d,W as e,$ as g};
