import{_ as $}from"./index-Dw83nXmd.js";import{g as q,e as D,A as S,d as z}from"./add-DUClAZD5.js";import{bB as H,ap as I,aP as K,bC as U,_ as j}from"./index-pAeQZ1-G.js";import{E as F}from"./index-B7M-oQ2A.js";import{E as O}from"./index-DX8iX1cV.js";import{f as P}from"./index-6UX7B9cc.js";import{d as A,r as c,D as Q,i as d,c as W,o as C,k as n,u as s,F as k,w as a,a as p,j as y,W as X,X as J,z as Y}from"./core-DgTHnQpx.js";import"./pagination-JlVISjBV.js";import"./elIcon-DHXrp9ew.js";import"./index-BqQg0EVn.js";import"./event-BB_Ol6Sd.js";import"./index-yTwIwyY4.js";import"./index-DCjaOx1S.js";import"./mock-h91I9qF-.js";import"./index-Fxq-ji8x.js";import"./dropdown-ehv5OB2i.js";import"./index-DjgP1kfQ.js";import"./index-C673HT9H.js";import"./index-BEhH5FRK.js";import"./index-BVaSujfL.js";import"./castArray-B4jZf3Od.js";import"./index-DHCz5-7b.js";import"./strings-SjbtM2e1.js";import"./index-Cj9wNU57.js";import"./index-CdVB_pP8.js";import"./index-COYC1Rw2.js";import"./scroll-C-BcuyVu.js";import"./refs-vhJOtpGo.js";import"./validator-C14abE9R.js";const Z={class:"group"},ee={class:"group-item"},te=["innerHTML"],oe={class:"group-item-btn"},ne=A({setup:!0,name:"Group"}),re=A({...ne,__name:"group",emits:["currentChange"],setup(se,{expose:w,emit:R}){const f=R,i=c(!1),m=c(),r=q();let _=[];const l=c(""),g=t=>{r.data.value=H(t,["name"],_),Y(()=>m.value.vxeTableRef.setAllTreeExpand(!0))},u=async()=>{await r.runAsync(),_=I(r.data.value),f("currentChange",[]),g(l.value)};u();const T=({row:t})=>f("currentChange",t.rules),v=Q(),h=t=>{v.value=t?K(t,["children"]):void 0,i.value=!0},b=t=>{O.confirm("确认删除所选角色组?").then(()=>{z().runAsync(t).then(u)}).catch(()=>{})},{runAsync:E}=D();return w({setGroupRules:async t=>{if(!t)return!1;const e=m.value.vxeTableRef.getCurrentRecord();if(e)return await E(e.id,{rules:t}),e.rules=t,!0;U.error("请先选择分组")}}),(t,e)=>{const G=P,B=d("mel-icon-edit"),x=F,L=d("mel-icon-delete"),M=d("vxe-column"),N=$;return C(),W("div",Z,[n(N,{ref_key:"groupRef",ref:m,"quick-search":s(l),"onUpdate:quickSearch":e[0]||(e[0]=o=>k(l)?l.value=o:null),data:s(r).data.value??[],loading:s(r).loading.value,"row-config":{isCurrent:!0,useKey:!0},"tree-config":{expandAll:!0,showLine:!0},"column-config":{useKey:!0},"custom-column":!1,print:!1,"export-menu":[],"show-overflow":"",height:"auto","me-class":"table-group",onCurrentRowChange:T,onAdd:e[1]||(e[1]=o=>h()),onRefresh:u,onQuickSearch:g},{default:a(()=>[n(M,{field:"name",title:"角色","tree-node":""},{default:a(({row:o})=>[p("div",ee,[p("div",null,[p("span",{innerHTML:o.name},null,8,te),e[5]||(e[5]=y("  ")),o.status===0?(C(),X(G,{key:0,size:"small",type:"info"},{default:a(()=>e[4]||(e[4]=[y("禁用")])),_:1})):J("",!0)]),p("div",oe,[n(x,{type:"primary",underline:!1,onClick:V=>h(o)},{default:a(()=>[n(B)]),_:2},1032,["onClick"]),n(x,{type:"danger",underline:!1,style:{"margin-left":"5px"},onClick:V=>b(o.id)},{default:a(()=>[n(L)]),_:2},1032,["onClick"])])])]),_:1})]),_:1},8,["quick-search","data","loading"]),n(S,{show:s(i),"onUpdate:show":e[2]||(e[2]=o=>k(i)?i.value=o:null),data:s(v),onSuccess:e[3]||(e[3]=o=>u())},null,8,["show","data"])])}}}),qe=j(re,[["__scopeId","data-v-7e89eab6"]]);export{qe as default};
