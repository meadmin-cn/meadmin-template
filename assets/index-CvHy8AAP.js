import{N as h,d as D,k as A,a5 as $,K as x,B as K,x as _,M as U,D as j,p as F,y as J,A as V}from"./core-CiXDiIgu.js";import{k as Y,v as Z,A as T,W as w,w as k,B as L,Z as q,aH as S,aI as G,aJ as Q,aK as R}from"./index-DZG639DV.js";let f;const ee=e=>{var o;if(!Y)return 0;if(f!==void 0)return f;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const a=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const l=n.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),f=a-l,f},te=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,t=!1;return{onClick:s=>{o&&t&&e(s),o=t=!1},onMousedown:s=>{o=s.target===s.currentTarget},onMouseup:s=>{t=s.target===s.currentTarget}}},oe=Z({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ne={click:e=>e instanceof MouseEvent},se="overlay";var ae=D({name:"ElOverlay",props:oe,emits:ne,setup(e,{slots:o,emit:t}){const a=T(se),n=i=>{t("click",i)},{onClick:l,onMousedown:s,onMouseup:c}=te(e.customMaskEvent?void 0:n);return()=>e.mask?A("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:s,onMouseup:c},[x(o,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):$("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const ie=ae,ue=(e,o,t,a)=>{let n={offsetX:0,offsetY:0};const l=u=>{const v=u.clientX,W=u.clientY,{offsetX:p,offsetY:y}=n,d=e.value.getBoundingClientRect(),b=d.left,M=d.top,B=d.width,O=d.height,H=document.documentElement.clientWidth,N=document.documentElement.clientHeight,P=-b+p,X=-M+y,I=H-b-B+p,z=N-M-O+y,g=E=>{let r=p+E.clientX-v,m=y+E.clientY-W;a!=null&&a.value||(r=Math.min(Math.max(r,P),I),m=Math.min(Math.max(m,X),z)),n={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${L(r)}, ${L(m)})`)},C=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",C)},s=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",l)},c=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)},i=()=>{n={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return K(()=>{_(()=>{t.value?s():c()})}),U(()=>{c()}),{resetPosition:i}},de=(e,o={})=>{j(e)||q("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||T("popup"),a=F(()=>t.bm("parent","hidden"));if(!Y||S(document.body,a.value))return;let n=0,l=!1,s="0";const c=()=>{setTimeout(()=>{typeof document>"u"||l&&document&&(document.body.style.width=s,R(document.body,a.value))},200)};J(e,i=>{if(!i){c();return}l=!S(document.body,a.value),l&&(s=document.body.style.width,G(document.body,a.value)),n=ee(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,v=Q(document.body,"overflowY");n>0&&(u||v==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`)}),V(()=>c())};export{ie as E,de as a,te as b,ue as u};
