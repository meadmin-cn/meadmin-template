import{N as h,d as I,k as $,a5 as _,K as x,s as A,B as F,M as K,D as U,l as j,z as V,y as Z}from"./core-B3jmcjX3.js";import{l as Y,y as q,D as T,Z as w,z as k,F as L,a1 as G,au as S,av as J,aw as Q,ax as R}from"./index-BoXgzgB5.js";let f;const ee=e=>{var o;if(!Y)return 0;if(f!==void 0)return f;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const a=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const l=n.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),f=a-l,f},te=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,t=!1;return{onClick:s=>{o&&t&&e(s),o=t=!1},onMousedown:s=>{o=s.target===s.currentTarget},onMouseup:s=>{t=s.target===s.currentTarget}}},oe=q({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ne={click:e=>e instanceof MouseEvent},se="overlay";var ae=I({name:"ElOverlay",props:oe,emits:ne,setup(e,{slots:o,emit:t}){const a=T(se),n=u=>{t("click",u)},{onClick:l,onMousedown:s,onMouseup:c}=te(e.customMaskEvent?void 0:n);return()=>e.mask?$("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:s,onMouseup:c},[x(o,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):_("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const ue=ae,ie=(e,o,t,a)=>{let n={offsetX:0,offsetY:0};const l=i=>{const v=i.clientX,O=i.clientY,{offsetX:p,offsetY:y}=n,d=e.value.getBoundingClientRect(),b=d.left,M=d.top,W=d.width,B=d.height,N=document.documentElement.clientWidth,P=document.documentElement.clientHeight,X=-b+p,z=-M+y,H=N-b-W+p,D=P-M-B+y,g=E=>{let r=p+E.clientX-v,m=y+E.clientY-O;a!=null&&a.value||(r=Math.min(Math.max(r,X),H),m=Math.min(Math.max(m,z),D)),n={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${L(r)}, ${L(m)})`)},C=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",C)},s=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",l)},c=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)},u=()=>{n={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return A(()=>{F(()=>{t.value?s():c()})}),K(()=>{c()}),{resetPosition:u}},de=(e,o={})=>{U(e)||G("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||T("popup"),a=j(()=>t.bm("parent","hidden"));if(!Y||S(document.body,a.value))return;let n=0,l=!1,s="0";const c=()=>{setTimeout(()=>{typeof document>"u"||l&&document&&(document.body.style.width=s,R(document.body,a.value))},200)};V(e,u=>{if(!u){c();return}l=!S(document.body,a.value),l&&(s=document.body.style.width,J(document.body,a.value)),n=ee(t.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,v=Q(document.body,"overflowY");n>0&&(i||v==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`)}),Z(()=>c())};export{ue as E,de as a,te as b,ie as u};
