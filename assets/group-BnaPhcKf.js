import{_ as A}from"./index-DPlHoWsj.js";import{g as D,A as w,d as H,e as I}from"./add-ppNtg6pN.js";import{bB as K,ap as U,bC as j,_ as z}from"./index-gAuTWnPj.js";import{E as T}from"./index-Ds_3abiF.js";import{o as F}from"./omit-B_u2yBmR.js";import{E as O}from"./index-DN3M8rqg.js";import{f as E}from"./index-BK-tAmL-.js";import{d as R,r as d,y as Q,i as r,c as W,o as C,k as n,u as a,F as k,w as i,a as m,j as y,W as X,X as J,E as P}from"./core-C4-oPvXL.js";import"./pagination-BmVlXqXF.js";import"./elIcon-CvLeSQbC.js";import"./index-CXi-HPtR.js";import"./event-BB_Ol6Sd.js";import"./index-DEe-wAkk.js";import"./index-BZ4rUAOC.js";import"./mock-DBzxB1z9.js";import"./index-QECcLlNb.js";import"./dropdown-Dxc3fwJq.js";import"./index-CSbSf2hP.js";import"./index-YdNnni6d.js";import"./index-DlNmoOEa.js";import"./index-hqSl7NKM.js";import"./castArray-DUEINfxs.js";import"./index-DviC_746.js";import"./strings-wN4GZIAz.js";import"./index-qNnqtpjd.js";import"./index-BRJ7oqSm.js";import"./index-CMAgUPwQ.js";import"./scroll-CkTYXBUz.js";import"./refs-BScKkwek.js";import"./isPlainObject-iAcVfnk8.js";import"./validator-5BzNceBX.js";const Y={class:"group"},Z={class:"group-item"},ee=["innerHTML"],te={class:"group-item-btn"},oe=R({setup:!0,name:"Group",getComponents:()=>[E,r("mel-icon-edit"),T,r("mel-icon-delete"),r("vxe-column"),A,w]}),ne=R({...oe,__name:"group",emits:["currentChange"],setup(re,{expose:b,emit:G}){const f=G,l=d(!1),c=d(),s=D();let _=[];const u=d(""),g=t=>{s.data.value=K(t,["name"],_),P(()=>c.value.vxeTableRef.setAllTreeExpand(!0))},p=async()=>{await s.runAsync(),_=U(s.data.value),f("currentChange",[]),g(u.value)};p();const B=({row:t})=>f("currentChange",t.rules),v=Q(),h=t=>{v.value=t?F(t,["children"]):void 0,l.value=!0},L=t=>{O.confirm("确认删除所选角色组?").then(()=>{H().runAsync(t).then(p)}).catch(()=>{})};return b({setGroupRules:async t=>{if(!t)return!1;const e=c.value.vxeTableRef.getCurrentRecord();if(e)return await I().runAsync(e.id,{rules:t}),e.rules=t,!0;j.error("请先选择分组")}}),(t,e)=>{const M=E,N=r("mel-icon-edit"),x=T,V=r("mel-icon-delete"),$=r("vxe-column"),q=A;return C(),W("div",Y,[n(q,{ref_key:"groupRef",ref:c,"quick-search":a(u),"onUpdate:quickSearch":e[0]||(e[0]=o=>k(u)?u.value=o:null),data:a(s).data.value??[],loading:a(s).loading.value,"row-config":{isCurrent:!0,useKey:!0},"tree-config":{expandAll:!0,line:!0},"column-config":{useKey:!0},"custom-column":!1,print:!1,"export-menu":[],"show-overflow":"",height:"auto","me-class":"table-group",onCurrentChange:B,onAdd:e[1]||(e[1]=o=>h()),onRefresh:p,onQuickSearch:g},{default:i(()=>[n($,{field:"name",title:"角色","tree-node":""},{default:i(({row:o})=>[m("div",Z,[m("div",null,[m("span",{innerHTML:o.name},null,8,ee),e[5]||(e[5]=y("  ")),o.status===0?(C(),X(M,{key:0,size:"small",type:"info"},{default:i(()=>e[4]||(e[4]=[y("禁用")])),_:1})):J("",!0)]),m("div",te,[n(x,{type:"primary",underline:!1,onClick:S=>h(o)},{default:i(()=>[n(N)]),_:2},1032,["onClick"]),n(x,{type:"danger",underline:!1,style:{"margin-left":"5px"},onClick:S=>L(o.id)},{default:i(()=>[n(V)]),_:2},1032,["onClick"])])])]),_:1})]),_:1},8,["quick-search","data","loading"]),n(w,{show:a(l),"onUpdate:show":e[2]||(e[2]=o=>k(l)?l.value=o:null),data:a(v),onSuccess:e[3]||(e[3]=o=>p())},null,8,["show","data"])])}}}),Se=z(ne,[["__scopeId","data-v-ffcec703"]]);export{Se as default};
