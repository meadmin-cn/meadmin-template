import{d as ce,a5 as za,i as G,c as x,o as v,X as U,W as A,k as Y,ab as Ce,w as B,a as fe,Q as $,T as te,n as Pe,p as m,ar as ge,j as Ye,t as ie,L as ve,r as P,l as Oa,I as Qe,s as Ne,N as Ka,J as Ra,a4 as Ge,C as oe,aH as qa,y as ha,z as he,aD as Ua,aI as ja,R as me,u as o,F as Wa,a0 as xe,P as _e,as as Za,av as Xa,aJ as Ja,v as ea,m as ze,q as aa,aa as $e}from"./core-DgTHnQpx.js";import{P as Ya,h as pe,f as Ve,l as de,g as va,ac as Qa,aw as Oe,R as Ga,d as Re,e as le,ax as el,ap as ma,Q as ga,o as H,ay as Ie,az as ba,w as qe,V as al,ae as ll,ab as tl,am as sl,a5 as ya,aA as nl,an as ol,Y as il,a4 as rl,T as la,Z as cl,aB as ul,i as ta,aa as dl,m as sa,aj as na,aC as pl,aD as fl,a0 as oa}from"./index-pAeQZ1-G.js";import{E as ka}from"./index-DjgP1kfQ.js";import{f as hl,l as Ca,t as Na,b as vl,e as ml,x as Te,y as gl}from"./elIcon-DHXrp9ew.js";import{E as bl}from"./index-BEhH5FRK.js";import{b as yl}from"./index-Cj9wNU57.js";import{c as ia}from"./strings-SjbtM2e1.js";import{i as we,t as ra,f as ca}from"./index-6UX7B9cc.js";import{f as ua,g as da}from"./index-Co5Oq1AN.js";import{s as kl}from"./scroll-C-BcuyVu.js";import{U as re,C as Ee}from"./event-BB_Ol6Sd.js";import{a as Cl,E as Nl}from"./index-BqQg0EVn.js";import{c as wl,u as wa,d as El}from"./index-yTwIwyY4.js";var Vl=1/0;function Sl(a){var t=a==null?0:a.length;return t?Ya(a,Vl):[]}var $l=ce({name:"NodeContent",setup(){return{ns:pe("cascader-node")}},render(){const{ns:a}=this,{node:t,panel:s}=this.$parent,{data:e,label:i}=t,{renderLabelFn:h}=s;return za("span",{class:a.e("label")},h?h({node:t,data:e}):i)}});const Ue=Symbol(),Tl=ce({name:"ElCascaderNode",components:{ElCheckbox:bl,ElRadio:yl,NodeContent:$l,ElIcon:de,Check:Na,Loading:Ca,ArrowRight:hl},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(a,{emit:t}){const s=Pe(Ue),e=pe("cascader-node"),i=m(()=>s.isHoverMenu),h=m(()=>s.config.multiple),p=m(()=>s.config.checkStrictly),N=m(()=>{var E;return(E=s.checkedNodes[0])==null?void 0:E.uid}),r=m(()=>a.node.isDisabled),w=m(()=>a.node.isLeaf),V=m(()=>p.value&&!w.value||!r.value),b=m(()=>R(s.expandingNode)),L=m(()=>p.value&&s.checkedNodes.some(R)),R=E=>{var D;const{level:q,uid:ee}=a.node;return((D=E==null?void 0:E.pathNodes[q-1])==null?void 0:D.uid)===ee},j=()=>{b.value||s.expandNode(a.node)},I=E=>{const{node:D}=a;E!==D.checked&&s.handleCheckChange(D,E)},O=()=>{s.lazyLoad(a.node,()=>{w.value||j()})},K=E=>{i.value&&(W(),!w.value&&t("expand",E))},W=()=>{const{node:E}=a;!V.value||E.loading||(E.loaded?j():O())},F=()=>{i.value&&!w.value||(w.value&&!r.value&&!p.value&&!h.value?M(!0):W())},Z=E=>{p.value?(I(E),a.node.loaded&&j()):M(E)},M=E=>{a.node.loaded?(I(E),!p.value&&j()):O()};return{panel:s,isHoverMenu:i,multiple:h,checkStrictly:p,checkedNodeId:N,isDisabled:r,isLeaf:w,expandable:V,inExpandingPath:b,inCheckedPath:L,ns:e,handleHoverExpand:K,handleExpand:W,handleClick:F,handleCheck:M,handleSelectCheck:Z}}});function _l(a,t,s,e,i,h){const p=G("el-checkbox"),N=G("el-radio"),r=G("check"),w=G("el-icon"),V=G("node-content"),b=G("loading"),L=G("arrow-right");return v(),x("li",{id:`${a.menuId}-${a.node.uid}`,role:"menuitem","aria-haspopup":!a.isLeaf,"aria-owns":a.isLeaf?void 0:a.menuId,"aria-expanded":a.inExpandingPath,tabindex:a.expandable?-1:void 0,class:$([a.ns.b(),a.ns.is("selectable",a.checkStrictly),a.ns.is("active",a.node.checked),a.ns.is("disabled",!a.expandable),a.inExpandingPath&&"in-active-path",a.inCheckedPath&&"in-checked-path"]),onMouseenter:a.handleHoverExpand,onFocus:a.handleHoverExpand,onClick:a.handleClick},[U(" prefix "),a.multiple?(v(),A(p,{key:0,"model-value":a.node.checked,indeterminate:a.node.indeterminate,disabled:a.isDisabled,onClick:Ce(()=>{},["stop"]),"onUpdate:modelValue":a.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):a.checkStrictly?(v(),A(N,{key:1,"model-value":a.checkedNodeId,label:a.node.uid,disabled:a.isDisabled,"onUpdate:modelValue":a.handleSelectCheck,onClick:Ce(()=>{},["stop"])},{default:B(()=>[U(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),fe("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):a.isLeaf&&a.node.checked?(v(),A(w,{key:2,class:$(a.ns.e("prefix"))},{default:B(()=>[Y(r)]),_:1},8,["class"])):U("v-if",!0),U(" content "),Y(V),U(" postfix "),a.isLeaf?U("v-if",!0):(v(),x(te,{key:3},[a.node.loading?(v(),A(w,{key:0,class:$([a.ns.is("loading"),a.ns.e("postfix")])},{default:B(()=>[Y(b)]),_:1},8,["class"])):(v(),A(w,{key:1,class:$(["arrow-right",a.ns.e("postfix")])},{default:B(()=>[Y(L)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var Il=Ve(Tl,[["render",_l],["__file","node.vue"]]);const Pl=ce({name:"ElCascaderMenu",components:{Loading:Ca,ElIcon:de,ElScrollbar:ka,ElCascaderNode:Il},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(a){const t=Oa(),s=pe("cascader-menu"),{t:e}=va(),i=Qa();let h=null,p=null;const N=Pe(Ue),r=P(null),w=m(()=>!a.nodes.length),V=m(()=>!N.initialLoaded),b=m(()=>`${i.value}-${a.index}`),L=O=>{h=O.target},R=O=>{if(!(!N.isHoverMenu||!h||!r.value))if(h.contains(O.target)){j();const K=t.vnode.el,{left:W}=K.getBoundingClientRect(),{offsetWidth:F,offsetHeight:Z}=K,M=O.clientX-W,E=h.offsetTop,D=E+h.offsetHeight;r.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${M} ${E} L${F} 0 V${E} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${M} ${D} L${F} ${Z} V${D} Z" />
        `}else p||(p=window.setTimeout(I,N.config.hoverThreshold))},j=()=>{p&&(clearTimeout(p),p=null)},I=()=>{r.value&&(r.value.innerHTML="",j())};return{ns:s,panel:N,hoverZone:r,isEmpty:w,isLoading:V,menuId:b,t:e,handleExpand:L,handleMouseMove:R,clearHoverZone:I}}});function xl(a,t,s,e,i,h){const p=G("el-cascader-node"),N=G("loading"),r=G("el-icon"),w=G("el-scrollbar");return v(),A(w,{key:a.menuId,tag:"ul",role:"menu",class:$(a.ns.b()),"wrap-class":a.ns.e("wrap"),"view-class":[a.ns.e("list"),a.ns.is("empty",a.isEmpty)],onMousemove:a.handleMouseMove,onMouseleave:a.clearHoverZone},{default:B(()=>{var V;return[(v(!0),x(te,null,ge(a.nodes,b=>(v(),A(p,{key:b.uid,node:b,"menu-id":a.menuId,onExpand:a.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),a.isLoading?(v(),x("div",{key:0,class:$(a.ns.e("empty-text"))},[Y(r,{size:"14",class:$(a.ns.is("loading"))},{default:B(()=>[Y(N)]),_:1},8,["class"]),Ye(" "+ie(a.t("el.cascader.loading")),1)],2)):a.isEmpty?(v(),x("div",{key:1,class:$(a.ns.e("empty-text"))},[ve(a.$slots,"empty",{},()=>[Ye(ie(a.t("el.cascader.noData")),1)])],2)):(V=a.panel)!=null&&V.isHoverMenu?(v(),x(te,{key:2},[U(" eslint-disable-next-line vue/html-self-closing "),(v(),x("svg",{ref:"hoverZone",class:$(a.ns.e("hover-zone"))},null,2))],2112)):U("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Ll=Ve(Pl,[["render",xl],["__file","menu.vue"]]);let Dl=0;const Ml=a=>{const t=[a];let{parent:s}=a;for(;s;)t.unshift(s),s=s.parent;return t};class be{constructor(t,s,e,i=!1){this.data=t,this.config=s,this.parent=e,this.root=i,this.uid=Dl++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:h,label:p,children:N}=s,r=t[N],w=Ml(this);this.level=i?0:e?e.level+1:1,this.value=t[h],this.label=t[p],this.pathNodes=w,this.pathValues=w.map(V=>V.value),this.pathLabels=w.map(V=>V.label),this.childrenData=r,this.children=(r||[]).map(V=>new be(V,s,this)),this.loaded=!s.lazy||this.isLeaf||!Oe(r)}get isDisabled(){const{data:t,parent:s,config:e}=this,{disabled:i,checkStrictly:h}=e;return(Qe(i)?i(t,this):!!t[i])||!h&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:e,loaded:i}=this,{lazy:h,leaf:p}=s,N=Qe(p)?p(t,this):t[p];return Ga(N)?h&&!i?!1:!(Ne(e)&&e.length):!!N}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:e}=this,i=new be(t,this.config,this);return Ne(s)?s.push(t):this.childrenData=[t],e.push(i),i}calcText(t,s){const e=t?this.pathLabels.join(s):this.label;return this.text=e,e}broadcast(t,...s){const e=`onParent${ia(t)}`;this.children.forEach(i=>{i&&(i.broadcast(t,...s),i[e]&&i[e](...s))})}emit(t,...s){const{parent:e}=this,i=`onChild${ia(t)}`;e&&(e[i]&&e[i](...s),e.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(i=>!i.isDisabled),e=s.length?s.every(i=>i.checked):!1;this.setCheckState(e)}setCheckState(t){const s=this.children.length,e=this.children.reduce((i,h)=>{const p=h.checked?1:h.indeterminate?.5:0;return i+p},0);this.checked=this.loaded&&this.children.filter(i=>!i.isDisabled).every(i=>i.loaded&&i.checked)&&t,this.indeterminate=this.loaded&&e!==s&&e>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:e}=this.config;s||!e?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Ke=(a,t)=>a.reduce((s,e)=>(e.isLeaf?s.push(e):(!t&&s.push(e),s=s.concat(Ke(e.children,t))),s),[]);class pa{constructor(t,s){this.config=s;const e=(t||[]).map(i=>new be(i,this.config));this.nodes=e,this.allNodes=Ke(e,!1),this.leafNodes=Ke(e,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const e=s?s.appendChild(t):new be(t,this.config);s||this.nodes.push(e),this.appendAllNodesAndLeafNodes(e)}appendNodes(t,s){t.forEach(e=>this.appendNode(e,s))}appendAllNodesAndLeafNodes(t){this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t),t.children&&t.children.forEach(s=>{this.appendAllNodesAndLeafNodes(s)})}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(i=>we(i.value,t)||we(i.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:e,level:i})=>we(t.value,e)&&t.level===i)||null}}const Ea=Re({modelValue:{type:le([Number,String,Array])},options:{type:le(Array),default:()=>[]},props:{type:le(Object),default:()=>({})}}),Bl={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ka,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Fl=a=>m(()=>({...Bl,...a.props})),fa=a=>{if(!a)return 0;const t=a.id.split("-");return Number(t[t.length-2])},Hl=a=>{if(!a)return;const t=a.querySelector("input");t?t.click():el(a)&&a.click()},Al=(a,t)=>{const s=t.slice(0),e=s.map(h=>h.uid),i=a.reduce((h,p)=>{const N=e.indexOf(p.uid);return N>-1&&(h.push(p),s.splice(N,1),e.splice(N,1)),h},[]);return i.push(...s),i},zl=ce({name:"ElCascaderPanel",components:{ElCascaderMenu:Ll},props:{...Ea,border:{type:Boolean,default:!0},renderLabel:Function},emits:[re,Ee,"close","expand-change"],setup(a,{emit:t,slots:s}){let e=!1;const i=pe("cascader"),h=Fl(a);let p=null;const N=P(!0),r=P([]),w=P(null),V=P([]),b=P(null),L=P([]),R=m(()=>h.value.expandTrigger==="hover"),j=m(()=>a.renderLabel||s.default),I=()=>{const{options:d}=a,g=h.value;e=!1,p=new pa(d,g),V.value=[p.getNodes()],g.lazy&&Oe(a.options)?(N.value=!1,O(void 0,C=>{C&&(p=new pa(C,g),V.value=[p.getNodes()]),N.value=!0,q(!1,!0)})):q(!1,!0)},O=(d,g)=>{const C=h.value;d=d||new be({},C,void 0,!0),d.loading=!0;const k=n=>{const f=d,y=f.root?null:f;n&&(p==null||p.appendNodes(n,y)),f.loading=!1,f.loaded=!0,f.childrenData=f.childrenData||[],g&&g(n)};C.lazyLoad(d,k)},K=(d,g)=>{var C;const{level:k}=d,n=V.value.slice(0,k);let f;d.isLeaf?f=d.pathNodes[k-2]:(f=d,n.push(d.children)),((C=b.value)==null?void 0:C.uid)!==(f==null?void 0:f.uid)&&(b.value=d,V.value=n,!g&&t("expand-change",(d==null?void 0:d.pathValues)||[]))},W=(d,g,C=!0)=>{const{checkStrictly:k,multiple:n}=h.value,f=L.value[0];e=!0,!n&&(f==null||f.doCheck(!1)),d.doCheck(g),D(),C&&!n&&!k&&t("close"),!C&&!n&&!k&&F(d)},F=d=>{d&&(d=d.parent,F(d),d&&K(d))},Z=d=>p==null?void 0:p.getFlattedNodes(d),M=d=>{var g;return(g=Z(d))==null?void 0:g.filter(C=>C.checked!==!1)},E=()=>{L.value.forEach(d=>d.doCheck(!1)),D(),V.value=V.value.slice(0,1),b.value=null,t("expand-change",[])},D=()=>{var d;const{checkStrictly:g,multiple:C}=h.value,k=L.value,n=M(!g),f=Al(k,n),y=f.map(S=>S.valueByOption);L.value=f,w.value=C?y:(d=y[0])!=null?d:null},q=(d=!1,g=!1)=>{const{modelValue:C}=a,{lazy:k,multiple:n,checkStrictly:f}=h.value,y=!f;if(!(!N.value||e||!g&&we(C,w.value)))if(k&&!d){const z=ua(Sl(da(C))).map(T=>p==null?void 0:p.getNodeByValue(T)).filter(T=>!!T&&!T.loaded&&!T.loading);z.length?z.forEach(T=>{O(T,()=>q(!1,g))}):q(!0,g)}else{const S=n?da(C):[C],z=ua(S.map(T=>p==null?void 0:p.getNodeByValue(T,y)));ee(z,g),w.value=ma(C)}},ee=(d,g=!0)=>{const{checkStrictly:C}=h.value,k=L.value,n=d.filter(S=>!!S&&(C||S.isLeaf)),f=p==null?void 0:p.getSameNode(b.value),y=g&&f||n[0];y?y.pathNodes.forEach(S=>K(S,!0)):b.value=null,k.forEach(S=>S.doCheck(!1)),Ge(n).forEach(S=>S.doCheck(!0)),L.value=n,he(X)},X=()=>{ga&&r.value.forEach(d=>{const g=d==null?void 0:d.$el;if(g){const C=g.querySelector(`.${i.namespace.value}-scrollbar__wrap`),k=g.querySelector(`.${i.b("node")}.${i.is("active")}`)||g.querySelector(`.${i.b("node")}.in-active-path`);kl(C,k)}})},Q=d=>{const g=d.target,{code:C}=d;switch(C){case H.up:case H.down:{d.preventDefault();const k=C===H.up?-1:1;Ie(ba(g,k,`.${i.b("node")}[tabindex="-1"]`));break}case H.left:{d.preventDefault();const k=r.value[fa(g)-1],n=k==null?void 0:k.$el.querySelector(`.${i.b("node")}[aria-expanded="true"]`);Ie(n);break}case H.right:{d.preventDefault();const k=r.value[fa(g)+1],n=k==null?void 0:k.$el.querySelector(`.${i.b("node")}[tabindex="-1"]`);Ie(n);break}case H.enter:case H.numpadEnter:Hl(g);break}};return Ra(Ue,Ge({config:h,expandingNode:b,checkedNodes:L,isHoverMenu:R,initialLoaded:N,renderLabelFn:j,lazyLoad:O,expandNode:K,handleCheckChange:W})),oe([h,()=>a.options],I,{deep:!0,immediate:!0}),oe(()=>a.modelValue,()=>{e=!1,q()},{deep:!0}),oe(()=>w.value,d=>{we(d,a.modelValue)||(t(re,d),t(Ee,d))}),qa(()=>r.value=[]),ha(()=>!Oe(a.modelValue)&&q()),{ns:i,menuList:r,menus:V,checkedNodes:L,handleKeyDown:Q,handleCheckChange:W,getFlattedNodes:Z,getCheckedNodes:M,clearCheckedNodes:E,calculateCheckedValue:D,scrollToExpandingNode:X}}});function Ol(a,t,s,e,i,h){const p=G("el-cascader-menu");return v(),x("div",{class:$([a.ns.b("panel"),a.ns.is("bordered",a.border)]),onKeydown:a.handleKeyDown},[(v(!0),x(te,null,ge(a.menus,(N,r)=>(v(),A(p,{key:r,ref_for:!0,ref:w=>a.menuList[r]=w,index:r,nodes:[...N]},{empty:B(()=>[ve(a.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var Kl=Ve(zl,[["render",Ol],["__file","index.vue"]]);const Rl=qe(Kl),ql=Re({...Ea,size:ya,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:le(Function),default:(a,t)=>a.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:le(Function),default:()=>!0},placement:{type:le(String),values:sl,default:"bottom-start"},fallbackPlacements:{type:le(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:tl.teleported,tagType:{...ra.type,default:"info"},tagEffect:{...ra.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...ll}),Ul={[re]:a=>!0,[Ee]:a=>!0,focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,visibleChange:a=>al(a),expandChange:a=>!!a,removeTag:a=>!!a},jl="ElCascader",Wl=ce({name:jl}),Zl=ce({...Wl,props:ql,emits:Ul,setup(a,{expose:t,emit:s}){const e=a,i={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:l})=>{const{modifiersData:c,placement:u}=l;["right","left","bottom","top"].includes(u)||(c.arrow.x=35)},requires:["arrow"]}]},h=Ua();let p=0,N=0;const r=pe("cascader"),w=pe("input"),{t:V}=va(),{form:b,formItem:L}=wl(),{valueOnClear:R}=nl(e),{isComposing:j,handleComposition:I}=Cl({afterComposition(l){var c;const u=(c=l.target)==null?void 0:c.value;Ae(u)}}),O=P(null),K=P(null),W=P(null),F=P(null),Z=P(null),M=P(!1),E=P(!1),D=P(!1),q=P(!1),ee=P(""),X=P(""),Q=P([]),d=P([]),g=P([]),C=m(()=>h.style),k=m(()=>e.disabled||(b==null?void 0:b.disabled)),n=m(()=>e.placeholder||V("el.cascader.placeholder")),f=m(()=>X.value||Q.value.length>0||j.value?"":n.value),y=wa(),S=m(()=>y.value==="small"?"small":"default"),z=m(()=>!!e.props.multiple),T=m(()=>!e.filterable||z.value),ue=m(()=>z.value?X.value:ee.value),ye=m(()=>{var l;return((l=F.value)==null?void 0:l.checkedNodes)||[]}),Va=m(()=>!e.clearable||k.value||D.value||!E.value?!1:!!ye.value.length),Se=m(()=>{const{showAllLevels:l,separator:c}=e,u=ye.value;return u.length?z.value?"":u[0].calcText(l,c):""}),Sa=m(()=>(L==null?void 0:L.validateState)||""),Le=m({get(){return ma(e.modelValue)},set(l){const c=l??R.value;s(re,c),s(Ee,c),e.validateEvent&&(L==null||L.validate("change").catch(u=>ol()))}}),$a=m(()=>[r.b(),r.m(y.value),r.is("disabled",k.value),h.class]),Ta=m(()=>[w.e("icon"),"icon-arrow-down",r.is("reverse",M.value)]),_a=m(()=>r.is("focus",M.value||q.value)),je=m(()=>{var l,c;return(c=(l=O.value)==null?void 0:l.popperRef)==null?void 0:c.contentRef}),J=l=>{var c,u,_;k.value||(l=l??!M.value,l!==M.value&&(M.value=l,(u=(c=K.value)==null?void 0:c.input)==null||u.setAttribute("aria-expanded",`${l}`),l?(ke(),he((_=F.value)==null?void 0:_.scrollToExpandingNode)):e.filterable&&He(),s("visibleChange",l)))},ke=()=>{he(()=>{var l;(l=O.value)==null||l.updatePopper()})},De=()=>{D.value=!1},Me=l=>{const{showAllLevels:c,separator:u}=e;return{node:l,key:l.uid,text:l.calcText(c,u),hitState:!1,closable:!k.value&&!l.isDisabled,isCollapseTag:!1}},Be=l=>{var c;const u=l.node;u.doCheck(!1),(c=F.value)==null||c.calculateCheckedValue(),s("removeTag",u.valueByOption)},Ia=()=>{if(!z.value)return;const l=ye.value,c=[],u=[];if(l.forEach(_=>u.push(Me(_))),d.value=u,l.length){l.slice(0,e.maxCollapseTags).forEach(ae=>c.push(Me(ae)));const _=l.slice(e.maxCollapseTags),se=_.length;se&&(e.collapseTags?c.push({key:-1,text:`+ ${se}`,closable:!1,isCollapseTag:!0}):_.forEach(ae=>c.push(Me(ae))))}Q.value=c},We=()=>{var l,c;const{filterMethod:u,showAllLevels:_,separator:se}=e,ae=(c=(l=F.value)==null?void 0:l.getFlattedNodes(!e.props.checkStrictly))==null?void 0:c.filter(ne=>ne.isDisabled?!1:(ne.calcText(_,se),u(ne,ue.value)));z.value&&(Q.value.forEach(ne=>{ne.hitState=!1}),d.value.forEach(ne=>{ne.hitState=!1})),D.value=!0,g.value=ae,ke()},Pa=()=>{var l;let c;D.value&&Z.value?c=Z.value.$el.querySelector(`.${r.e("suggestion-item")}`):c=(l=F.value)==null?void 0:l.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`),c&&(c.focus(),!D.value&&c.click())},Fe=()=>{var l,c;const u=(l=K.value)==null?void 0:l.input,_=W.value,se=(c=Z.value)==null?void 0:c.$el;if(!(!ga||!u)){if(se){const ae=se.querySelector(`.${r.e("suggestion-list")}`);ae.style.minWidth=`${u.offsetWidth}px`}if(_){const{offsetHeight:ae}=_,ne=Q.value.length>0?`${Math.max(ae,p)-2}px`:`${p}px`;u.style.height=ne,ke()}}},xa=l=>{var c;return(c=F.value)==null?void 0:c.getCheckedNodes(l)},La=l=>{ke(),s("expandChange",l)},Da=l=>{if(!j.value)switch(l.code){case H.enter:case H.numpadEnter:J();break;case H.down:J(!0),he(Pa),l.preventDefault();break;case H.esc:M.value===!0&&(l.preventDefault(),l.stopPropagation(),J(!1));break;case H.tab:J(!1);break}},Ma=()=>{var l;(l=F.value)==null||l.clearCheckedNodes(),!M.value&&e.filterable&&He(),J(!1),s("clear")},He=()=>{const{value:l}=Se;ee.value=l,X.value=l},Ba=l=>{var c,u;const{checked:_}=l;z.value?(c=F.value)==null||c.handleCheckChange(l,!_,!1):(!_&&((u=F.value)==null||u.handleCheckChange(l,!0,!1)),J(!1))},Fa=l=>{const c=l.target,{code:u}=l;switch(u){case H.up:case H.down:{l.preventDefault();const _=u===H.up?-1:1;Ie(ba(c,_,`.${r.e("suggestion-item")}[tabindex="-1"]`));break}case H.enter:case H.numpadEnter:c.click();break}},Ha=()=>{const l=Q.value,c=l[l.length-1];N=X.value?0:N+1,!(!c||!N||e.collapseTags&&l.length>1)&&(c.hitState?Be(c):c.hitState=!0)},Ze=l=>{const c=l.target,u=r.e("search-input");c.className===u&&(q.value=!0),s("focus",l)},Xe=l=>{q.value=!1,s("blur",l)},Aa=il(()=>{const{value:l}=ue;if(!l)return;const c=e.beforeFilter(l);ja(c)?c.then(We).catch(()=>{}):c!==!1?We():De()},e.debounce),Ae=(l,c)=>{!M.value&&J(!0),!(c!=null&&c.isComposing)&&(l?Aa():De())},Je=l=>Number.parseFloat(ul(w.cssVarName("input-height"),l).value)-2;return oe(D,ke),oe([ye,k,()=>e.collapseTags],Ia),oe(Q,()=>{he(()=>Fe())}),oe(y,async()=>{await he();const l=K.value.input;p=Je(l)||p,Fe()}),oe(Se,He,{immediate:!0}),ha(()=>{const l=K.value.input,c=Je(l);p=l.offsetHeight||c,rl(l,Fe)}),t({getCheckedNodes:xa,cascaderPanelRef:F,togglePopperVisible:J,contentRef:je,presentText:Se}),(l,c)=>(v(),A(o(la),{ref_key:"tooltipRef",ref:O,visible:M.value,teleported:l.teleported,"popper-class":[o(r).e("dropdown"),l.popperClass],"popper-options":i,"fallback-placements":l.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:l.placement,transition:`${o(r).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:l.persistent,onHide:De},{default:B(()=>[me((v(),x("div",{class:$(o($a)),style:_e(o(C)),onClick:()=>J(o(T)?void 0:!0),onKeydown:Da,onMouseenter:u=>E.value=!0,onMouseleave:u=>E.value=!1},[Y(o(Nl),{ref_key:"input",ref:K,modelValue:ee.value,"onUpdate:modelValue":u=>ee.value=u,placeholder:o(f),readonly:o(T),disabled:o(k),"validate-event":!1,size:o(y),class:$(o(_a)),tabindex:o(z)&&l.filterable&&!o(k)?-1:void 0,onCompositionstart:o(I),onCompositionupdate:o(I),onCompositionend:o(I),onFocus:Ze,onBlur:Xe,onInput:Ae},Za({suffix:B(()=>[o(Va)?(v(),A(o(de),{key:"clear",class:$([o(w).e("icon"),"icon-circle-close"]),onClick:Ce(Ma,["stop"])},{default:B(()=>[Y(o(vl))]),_:1},8,["class","onClick"])):(v(),A(o(de),{key:"arrow-down",class:$(o(Ta)),onClick:Ce(u=>J(),["stop"])},{default:B(()=>[Y(o(ml))]),_:1},8,["class","onClick"]))]),_:2},[l.$slots.prefix?{name:"prefix",fn:B(()=>[ve(l.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),o(z)?(v(),x("div",{key:0,ref_key:"tagWrapper",ref:W,class:$([o(r).e("tags"),o(r).is("validate",!!o(Sa))])},[(v(!0),x(te,null,ge(Q.value,u=>(v(),A(o(ca),{key:u.key,type:l.tagType,size:o(S),effect:l.tagEffect,hit:u.hitState,closable:u.closable,"disable-transitions":"",onClose:_=>Be(u)},{default:B(()=>[u.isCollapseTag===!1?(v(),x("span",{key:0},ie(u.text),1)):(v(),A(o(la),{key:1,disabled:M.value||!l.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:B(()=>[fe("span",null,ie(u.text),1)]),content:B(()=>[fe("div",{class:$(o(r).e("collapse-tags"))},[(v(!0),x(te,null,ge(d.value.slice(l.maxCollapseTags),(_,se)=>(v(),x("div",{key:se,class:$(o(r).e("collapse-tag"))},[(v(),A(o(ca),{key:_.key,class:"in-tooltip",type:l.tagType,size:o(S),effect:l.tagEffect,hit:_.hitState,closable:_.closable,"disable-transitions":"",onClose:ae=>Be(_)},{default:B(()=>[fe("span",null,ie(_.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),l.filterable&&!o(k)?me((v(),x("input",{key:0,"onUpdate:modelValue":u=>X.value=u,type:"text",class:$(o(r).e("search-input")),placeholder:o(Se)?"":o(n),onInput:u=>Ae(X.value,u),onClick:Ce(u=>J(!0),["stop"]),onKeydown:Xa(Ha,["delete"]),onCompositionstart:o(I),onCompositionupdate:o(I),onCompositionend:o(I),onFocus:Ze,onBlur:Xe},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[Ja,X.value]]):U("v-if",!0)],2)):U("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[o(cl),()=>J(!1),o(je)]])]),content:B(()=>[me(Y(o(Rl),{ref_key:"cascaderPanelRef",ref:F,modelValue:o(Le),"onUpdate:modelValue":u=>Wa(Le)?Le.value=u:null,options:l.options,props:e.props,border:!1,"render-label":l.$slots.default,onExpandChange:La,onClose:u=>l.$nextTick(()=>J(!1))},{empty:B(()=>[ve(l.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[xe,!D.value]]),l.filterable?me((v(),A(o(ka),{key:0,ref_key:"suggestionPanel",ref:Z,tag:"ul",class:$(o(r).e("suggestion-panel")),"view-class":o(r).e("suggestion-list"),onKeydown:Fa},{default:B(()=>[g.value.length?(v(!0),x(te,{key:0},ge(g.value,u=>(v(),x("li",{key:u.uid,class:$([o(r).e("suggestion-item"),o(r).is("checked",u.checked)]),tabindex:-1,onClick:_=>Ba(u)},[ve(l.$slots,"suggestion-item",{item:u},()=>[fe("span",null,ie(u.text),1),u.checked?(v(),A(o(de),{key:0},{default:B(()=>[Y(o(Na))]),_:1})):U("v-if",!0)])],10,["onClick"]))),128)):ve(l.$slots,"empty",{key:1},()=>[fe("li",{class:$(o(r).e("empty-text"))},ie(o(V)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[xe,D.value]]):U("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Xl=Ve(Zl,[["__file","cascader.vue"]]);const ht=qe(Xl),Jl=Re({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:le([Array,Object]),default:()=>sa(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:le([Array,Object]),default:()=>[Te,Te,Te]},voidIcon:{type:na,default:()=>gl},disabledVoidIcon:{type:na,default:()=>Te},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:le(Array),default:()=>sa(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:ya,clearable:Boolean,...dl(["ariaLabel"])}),Yl={[Ee]:a=>ta(a),[re]:a=>ta(a)},Ql=ce({name:"ElRate"}),Gl=ce({...Ql,props:Jl,emits:Yl,setup(a,{expose:t,emit:s}){const e=a;function i(n,f){const y=T=>ea(T),S=Object.keys(f).map(T=>+T).filter(T=>{const ue=f[T];return(y(ue)?ue.excluded:!1)?n<T:n<=T}).sort((T,ue)=>T-ue),z=f[S[0]];return y(z)&&z.value||z}const h=Pe(pl,void 0),p=Pe(fl,void 0),N=wa(),r=pe("rate"),{inputId:w,isLabeledByFormItem:V}=El(e,{formItemContext:p}),b=P(e.modelValue),L=P(-1),R=P(!0),j=m(()=>[r.b(),r.m(N.value)]),I=m(()=>e.disabled||(h==null?void 0:h.disabled)),O=m(()=>r.cssVarBlock({"void-color":e.voidColor,"disabled-void-color":e.disabledVoidColor,"fill-color":Z.value})),K=m(()=>{let n="";return e.showScore?n=e.scoreTemplate.replace(/\{\s*value\s*\}/,I.value?`${e.modelValue}`:`${b.value}`):e.showText&&(n=e.texts[Math.ceil(b.value)-1]),n}),W=m(()=>e.modelValue*100-Math.floor(e.modelValue)*100),F=m(()=>Ne(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),Z=m(()=>{const n=i(b.value,F.value);return ea(n)?"":n}),M=m(()=>{let n="";return I.value?n=`${W.value}%`:e.allowHalf&&(n="50%"),{color:Z.value,width:n}}),E=m(()=>{let n=Ne(e.icons)?[...e.icons]:{...e.icons};return n=ze(n),Ne(n)?{[e.lowThreshold]:n[0],[e.highThreshold]:{value:n[1],excluded:!0},[e.max]:n[2]}:n}),D=m(()=>i(e.modelValue,E.value)),q=m(()=>I.value?aa(e.disabledVoidIcon)?e.disabledVoidIcon:ze(e.disabledVoidIcon):aa(e.voidIcon)?e.voidIcon:ze(e.voidIcon)),ee=m(()=>i(b.value,E.value));function X(n){const f=I.value&&W.value>0&&n-1<e.modelValue&&n>e.modelValue,y=e.allowHalf&&R.value&&n-.5<=b.value&&n>b.value;return f||y}function Q(n){e.clearable&&n===e.modelValue&&(n=0),s(re,n),e.modelValue!==n&&s("change",n)}function d(n){I.value||(e.allowHalf&&R.value?Q(b.value):Q(n))}function g(n){if(I.value)return;let f=b.value;const y=n.code;return y===H.up||y===H.right?(e.allowHalf?f+=.5:f+=1,n.stopPropagation(),n.preventDefault()):(y===H.left||y===H.down)&&(e.allowHalf?f-=.5:f-=1,n.stopPropagation(),n.preventDefault()),f=f<0?0:f,f=f>e.max?e.max:f,s(re,f),s("change",f),f}function C(n,f){if(!I.value){if(e.allowHalf&&f){let y=f.target;oa(y,r.e("item"))&&(y=y.querySelector(`.${r.e("icon")}`)),(y.clientWidth===0||oa(y,r.e("decimal")))&&(y=y.parentNode),R.value=f.offsetX*2<=y.clientWidth,b.value=R.value?n-.5:n}else b.value=n;L.value=n}}function k(){I.value||(e.allowHalf&&(R.value=e.modelValue!==Math.floor(e.modelValue)),b.value=e.modelValue,L.value=-1)}return oe(()=>e.modelValue,n=>{b.value=n,R.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||s(re,0),t({setCurrentValue:C,resetCurrentValue:k}),(n,f)=>{var y;return v(),x("div",{id:o(w),class:$([o(j),o(r).is("disabled",o(I))]),role:"slider","aria-label":o(V)?void 0:n.ariaLabel||"rating","aria-labelledby":o(V)?(y=o(p))==null?void 0:y.labelId:void 0,"aria-valuenow":b.value,"aria-valuetext":o(K)||void 0,"aria-valuemin":"0","aria-valuemax":n.max,tabindex:"0",style:_e(o(O)),onKeydown:g},[(v(!0),x(te,null,ge(n.max,(S,z)=>(v(),x("span",{key:z,class:$(o(r).e("item")),onMousemove:T=>C(S,T),onMouseleave:k,onClick:T=>d(S)},[Y(o(de),{class:$([o(r).e("icon"),{hover:L.value===S},o(r).is("active",S<=b.value)])},{default:B(()=>[X(S)?U("v-if",!0):(v(),x(te,{key:0},[me((v(),A($e(o(ee)),null,null,512)),[[xe,S<=b.value]]),me((v(),A($e(o(q)),null,null,512)),[[xe,!(S<=b.value)]])],64)),X(S)?(v(),x(te,{key:1},[(v(),A($e(o(q)),{class:$([o(r).em("decimal","box")])},null,8,["class"])),Y(o(de),{style:_e(o(M)),class:$([o(r).e("icon"),o(r).e("decimal")])},{default:B(()=>[(v(),A($e(o(D))))]),_:1},8,["style","class"])],64)):U("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),n.showText||n.showScore?(v(),x("span",{key:0,class:$(o(r).e("text")),style:_e({color:n.textColor})},ie(o(K)),7)):U("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var et=Ve(Gl,[["__file","rate.vue"]]);const vt=qe(et);export{ht as E,vt as a};
